name: Run Selenium on Windows

on:
  workflow_dispatch:  # Allows manual trigger

jobs:
  run-selenium:
    runs-on: windows-latest  # âœ… Runs on Windows

    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: '17'

      - name: Download Chrome & ChromeDriver
        run: |
          choco install googlechrome -y
          $chrome_version = (Get-Item (Get-Command "chrome").Source).VersionInfo.ProductVersion
          Invoke-WebRequest -Uri "https://chromedriver.storage.googleapis.com/LATEST_RELEASE_$chrome_version" -OutFile "chromedriver_version.txt"
          $driver_version = Get-Content chromedriver_version.txt
          Invoke-WebRequest -Uri "https://chromedriver.storage.googleapis.com/$driver_version/chromedriver_win32.zip" -OutFile "chromedriver.zip"
          Expand-Archive -Path chromedriver.zip -DestinationPath .

      - name: Run Selenium Test
        run: |
          echo 'import org.openqa.selenium.WebDriver;
          import org.openqa.selenium.chrome.ChromeDriver;
          public class GoogleTest {
              public static void main(String[] args) {
                  System.setProperty("webdriver.chrome.driver", "chromedriver.exe");
                  WebDriver driver = new ChromeDriver();
                  driver.get("https://www.google.com");
                  System.out.println("Google launched successfully");
                  driver.quit();
              }
          }' > GoogleTest.java
          javac GoogleTest.java
          java GoogleTest
